Event clustering works in an asynchronous and autonomous way. Every time a photo is uploaded, a lightweight metadata event (photoId, location, timestamp, storageUrl) is published to Kafka. Event Clustering Workers continuously consume these events and look for other photos taken around the same place and time. Using simple geo-temporal rules (for example, within a 50-meter radius and a short time window), the worker decides whether the photo should join an existing event or if a new event needs to be created.

Once a decision is made, the worker delegates persistence to the Event Service, which is responsible for creating or updating the event and linking the relevant photos by updating their eventId. This separation keeps the clustering logic focused and lightweight, while database writes remain consistent and controlled. Since the workers run continuously and independently, event formation happens automatically without blocking uploads, and a periodic backup sweeper job ensures that any missed or edge cases are handled gracefully.
